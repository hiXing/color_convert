<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>颜色值转换器</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="author" content="T">
    <meta name="keywords" content="rgb转16进制 颜色值代码 颜色值rgb 颜色值在线转换 颜色代码转换 十六进制颜色转换 hsl、hsv颜色转换">
    <meta name="description" content="">
    <link href="./color_conversion/concat.css" type="text/css" rel="stylesheet">
    <link href="./color_conversion/color-picker.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="./color_conversion/concat.js"></script>
    <!-- jquery -->
    <!--[if lt IE 9]>
        <script src="http://cdn.yuangongju.com/Public/js//html5shiv.min.js?493c95"></script>
        <script src="http://cdn.yuangongju.com/Public/js//respond.min.js?493c95"></script>
    <![endif]-->
    <script type="text/javascript" src="./color_conversion/color-picker.min.js"></script>
    <script>
         var ltIe9 = false; 
         var _hmt = _hmt || [];
	</script>

</head>

<body style>
    <div class="container">
        <div class="row">
            <div class="wrapper">
                <div class="content">
                    <div id="tool_wrapper">
                        <style>
                        .colorbox {
                            width: 60px;
                            height: 20px;
                        }

                        .abso {
                            position: absolute;
                            margin-top: -10px;
                            width: 60px;
                            text-align: center
                        }
                        </style>
                        <div class="form-inline">
                            <input type="text" class="form-control con" id="con" style="width:530px" placeholder="请输入或选择颜色值进行转换 如：#abcdef" data-original-title="" title="">&nbsp;
                            <div id="color-picker" class="cp-default abs none" style="display: none;">
                                <div class="picker-wrapper">
                                    <div class="picker">
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%">
                                            <defs>
                                                <lineargradient id="gradient-black-0" x1="0%" y1="100%" x2="0%" y2="0%">
                                                    <stop offset="0%" stop-color="#000000" stop-opacity="1"></stop>
                                                    <stop offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop>
                                                </lineargradient>
                                                <lineargradient id="gradient-white-0" x1="0%" y1="100%" x2="100%" y2="100%">
                                                    <stop offset="0%" stop-color="#FFFFFF" stop-opacity="1"></stop>
                                                    <stop offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop>
                                                </lineargradient>
                                            </defs>
                                            <rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-white-0)"></rect>
                                            <rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-black-0)"></rect>
                                        </svg>
                                    </div>
                                    <div class="picker-indicator" style="pointer-events: none; top: 20.5px; left: 182.5px;"></div>
                                </div>
                                <div class="slide-wrapper">
                                    <div class="slide">
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%">
                                            <defs>
                                                <lineargradient id="gradient-hsv-0" x1="0%" y1="100%" x2="0%" y2="0%">
                                                    <stop offset="0%" stop-color="#FF0000" stop-opacity="1"></stop>
                                                    <stop offset="13%" stop-color="#FF00FF" stop-opacity="1"></stop>
                                                    <stop offset="25%" stop-color="#8000FF" stop-opacity="1"></stop>
                                                    <stop offset="38%" stop-color="#0040FF" stop-opacity="1"></stop>
                                                    <stop offset="50%" stop-color="#00FFFF" stop-opacity="1"></stop>
                                                    <stop offset="63%" stop-color="#00FF40" stop-opacity="1"></stop>
                                                    <stop offset="75%" stop-color="#0BED00" stop-opacity="1"></stop>
                                                    <stop offset="88%" stop-color="#FFFF00" stop-opacity="1"></stop>
                                                    <stop offset="100%" stop-color="#FF0000" stop-opacity="1"></stop>
                                                </lineargradient>
                                            </defs>
                                            <rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-hsv-0)"></rect>
                                        </svg>
                                    </div>
                                    <div class="slide-indicator" style="pointer-events: none;"></div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-default" id="btn">
                                <span class="glyphicon glyphicon-transfer"></span> 转换
                            </button>&nbsp;
                            <button type="button" class="btn btn-default" id="random">
                                <span class="glyphicon glyphicon-random"></span> 随机
                            </button>&nbsp; </div>
                        <div class="clear10"></div>
                        <div class="demo">
                            输入示例：
                            <span class="label label-default label14 cursor" style="background-color: #ee9922;">#ee9922</span>&nbsp;
                            <span class="label label-default label14 cursor" style="background-color: rgb(255,100,97);color:white;">255,100,97</span>&nbsp;
                            <span class="label label-default label14 cursor" style="background-color: rgba(255,100,97,.5);color:white;">255,100,97,.5</span>&nbsp;
                            <span class="label label-default label14 cursor" style="background-color: rgba(238,153,34,.5);color:white;">#80ee9922</span> &nbsp;
                        </div>
                        <div class="clear10"></div>
                        <table class="table-normal">
                            <tbody>
                                <tr>
                                    <th style="width:200px">颜色格式</th>
                                    <th style="width:300px">转换结果</th>
                                    <th style="width:150px">颜色预览</th>
                                    <th style="width:100px"> </th>
                                </tr>
                                <tr>
                                    <td id="first_td">16进制</td>
                                    <td><span id="re1"></span></td>
                                    <td class="center">
                                        <div class="abs abso">透明</div>
                                        <div id="colorbox1" class="colorbox abso"></div>
                                    </td>
                                    <td class="center">
                                        <button type="button" class="btn btn-default" id="cp1">
                                            <span class="glyphicon glyphicon-file"></span> 复制
                                        </button>&nbsp;
                                        <input id="re1_h" type="hidden" value>
                                    </td>
                                </tr>
                                <tr>
                                    <td>RGB</td>
                                    <td><span id="re2"></span></td>
                                    <td class="center">
                                        <div class="abs abso">透明</div>
                                        <div id="colorbox2" class="colorbox abso"></div>
                                    </td>
                                    <td class="center">
                                        <button type="button" class="btn btn-default" id="cp2">
                                            <span class="glyphicon glyphicon-file"></span> 复制
                                        </button>&nbsp;
                                        <input id="re2_h" type="hidden" value>
                                    </td>
                                </tr>
                                <tr>
                                    <td>ARGB(android常用)</td>
                                    <td><span id="re3"></span></td>
                                    <td class="center">
                                        <div class="abs abso">透明</div>
                                        <div id="colorbox3" class="colorbox abso"></div>
                                    </td>
                                    <td class="center">
                                        <button type="button" class="btn btn-default" id="cp3">
                                            <span class="glyphicon glyphicon-file"></span> 复制
                                        </button>&nbsp;
                                        <input id="re3_h" type="hidden" value>
                                    </td>
                                </tr>
                                <tr>
                                    <td>RGBA(HTML5、CSS3常用)</td>
                                    <td><span id="re4"></span></td>
                                    <td class="center">
                                        <div class="abs abso">透明</div>
                                        <div id="colorbox4" class="colorbox abso" ></div>
                                    </td>
                                    <td class="center">
                                        <button type="button" class="btn btn-default" id="cp4">
                                            <span class="glyphicon glyphicon-file"></span> 复制
                                        </button>&nbsp;
                                        <input id="re4_h" type="hidden" value>
                                    </td>
                                </tr>
                                <tr>
                                    <td>HSL</td>
                                    <td>
                                        <span id="re5"></span>
                                    </td>
                                    <td class="center">
                                        <div class="abs abso">透明</div>
                                        <div id="colorbox5" class="colorbox abso" ></div>
                                    </td>
                                    <td class="center">
                                        <button type="button" class="btn btn-default" id="cp5">
                                            <span class="glyphicon glyphicon-file"></span> 复制
                                        </button>&nbsp;
                                        <input id="re5_h" type="hidden" value>
                                    </td>
                                </tr>
                                <tr>
                                    <td>HSV</td>
                                    <td>
                                        <span id="re6"></span>
                                    </td>
                                    <td class="center">
                                        <div class="abs abso">透明</div>
                                        <div id="colorbox6" class="colorbox abso" ></div>
                                    </td>
                                    <td class="center">
                                        <button type="button" class="btn btn-default" id="cp6">
                                            <span class="glyphicon glyphicon-file"></span> 复制
                                        </button>&nbsp;
                                        <input id="re6_h" type="hidden" value>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <script>
                        var _colorPicker = "#color-picker";
                        $(function() {
                            $(".demo span").on('click', function() {
                                $("#con").val($(this).text());
                                $("#btn").click();
                            });
                            //                    $("#con").on('focus',function(){
                            //                        $(_colorPicker).show();
                            //                    });
                            $("body *").click(function(e) {
                                //                        if(e.target.is(_colorPicker))
                                if ($(this).is("#con") || $(this).is(_colorPicker)) {
                                    if (!ltIe9)
                                        $(_colorPicker).show();
                                    e.stopPropagation();
                                } else
                                    $(_colorPicker).hide();

                            });
                            if (!ltIe9) {
                                ColorPicker(
                                    document.getElementById('color-picker'),
                                    function(hex, hsv, rgb) {
                                        document.body.style.backgroundColor = hex; // #HEX
                                        $("#con").val(hex);
                                    });
                            }

                            $("#con").popover({ "html": true, "trigger": "hover" });

                            var off = $("#first_td").position();
                            debug(off.left);
                            debug(off.top);
                            //$("#color_boxes").css({"left": off.left + 325 , "top" : off.top +1  });
                            //$("#color_boxes").css({"left": 335 , "top" : 94 });
                            //复制
                            setCopy('#cp1', '#re1_h'); //16进制  						m=1
                            setCopy('#cp2', '#re2_h'); //RGB    151,151,151		m=2
                            setCopy('#cp3', '#re3_h'); //ARGB  8位					m=3
                            setCopy('#cp4', '#re4_h'); //RGBA  html5 				m=4
                            setCopy('#cp5', '#re5_h'); //HSL								m=5
                            setCopy('#cp6', '#re6_h'); //HSV

                            $("#reset").click(function() { resetResult(); });
                            $("#random").click(function() {
                                var r = parseInt(Math.random() * 255);
                                var g = parseInt(Math.random() * 255);
                                var b = parseInt(Math.random() * 255);
                                var a = Math.random().toFixed(1);
                                var rgba = r + "," + g + "," + b + "," + a.substring(1);
                                $("#con").val(rgba);
                                $("#btn").click();
                            });

                            $("#btn").click(function() {
                                var con = $("#con").val();
                                con = con.replace(/ /g, '');
                                con = con.toLowerCase();
                                var m = getModel(con);

                                if (m == 0)
                                    notice("输入错误!", "#btn");
                                else {
                                    debug(m[1]);
                                    var re = parseColor(m[1], m[0]);
                                    document.body.style.backgroundColor = re[0];

                                    $(re).each(function(k, v) {
                                        $("#re" + (k + 1)).html(v);
                                        $("#re" + (k + 1) + "_h").val(v);
                                    });

                                    $("#colorbox1").css("background-color", re[0]);
                                    $("#colorbox2").css("background-color", re[1]);
                                    $("#colorbox3").css({ "background-color": re[3] });
                                    $("#colorbox4").css("background-color", re[3]);
                                    $("#colorbox5").css("background-color", re[1]);
                                    $("#colorbox6").css("background-color", re[0]);



                                }
                                return false;
                            });
                        });

                        function parseColor(con, model) {
                            var a, r, g, b;
                            switch (model) {
                                case 1:
                                    r = parseInt(con.substring(0, 2), 16);
                                    g = parseInt(con.substring(2, 4), 16);
                                    b = parseInt(con.substring(4, 6), 16);
                                    a = 1;
                                    break;
                                case 2:
                                    var cons = con.split(',');
                                    r = cons[0];
                                    g = cons[1];
                                    b = cons[2];
                                    a = 1;
                                    break;
                                case 3:
                                    r = parseInt(con.substring(2, 4), 16);
                                    g = parseInt(con.substring(4, 6), 16);
                                    b = parseInt(con.substring(6, 8), 16);
                                    a = (parseInt(con.substring(0, 2), 16) / 255).toFixed(3);
                                    break;
                                case 4:
                                    cons = con.split(',');
                                    r = cons[0];
                                    g = cons[1];
                                    b = cons[2];
                                    a = parseFloat(cons[3]);
                                    break;
                                default:
                                    break;
                            }
                            debug('a = ' + a);
                            debug('r = ' + r);
                            debug('g = ' + g);
                            debug('b = ' + b);
                            var re = [];

                            var cr = parseInt(255 * (1 - a) + r * a);
                            var cg = parseInt(255 * (1 - a) + g * a);
                            var cb = parseInt(255 * (1 - a) + b * a);

                            var cr16 = setLengthTwo(cr.toString(16));
                            var cg16 = setLengthTwo(cg.toString(16));
                            var cb16 = setLengthTwo(cb.toString(16));
                            re[0] = ("#" + cr16 + cg16 + cb16).toUpperCase();
                            re[1] = "rgb(" + cr + "," + cg + "," + cb + ")";

                            var aa = setLengthTwo(parseInt(a * 255).toString(16));
                            var ar = setLengthTwo(parseInt(r).toString(16));
                            var ag = setLengthTwo(parseInt(g).toString(16));
                            var ab = setLengthTwo(parseInt(b).toString(16));

                            re[2] = ("#" + aa + ar + ag + ab).toUpperCase();
                            re[3] = "rgba(" + r + "," + g + "," + b + "," + a + ")";
                            debug(re[0]);
                            debug(re[1]);
                            debug(re[2]);
                            debug(re[3]);

                            var hsl = rgb2hsl(cr, cg, cb);
                            re[4] = "hsl(" + hsl[0] + ", " + hsl[1] + ", " + hsl[2] + ")";

                            var hsv = rgb2hsv(cr, cg, cb);
                            re[5] = "hsv(" + hsv[0] + ", " + hsv[1] + ", " + hsv[2] + ")";
                            return re;

                        }

                        function setCopy(){
                            
                        }

                        function setLengthTwo(str) {
                            if (str.length == 1)
                                return "0" + str;
                            return str;
                        }

                        function getModel(con) {
                            con = con.replace(/ /g, '');
                            con = con.toLowerCase();
                            var l = con.length;
                            //判断模式2 和 模式4
                            if (con.indexOf(',') > -1) {
                                var cons = con.split(',');
                                if (cons.length == 3 || cons.length == 4) {
                                    for (var i = 0; i < 3; i++) //判断前3位是否是小于255的
                                    {
                                        if (isNaN(cons[i]) || parseInt(cons[i]) > 255) {
                                            return 0;
                                        }
                                    }

                                    if (cons.length == 3)
                                        return [2, con];
                                    else {
                                        if (parseFloat(cons[3]) <= 1 && parseFloat(cons[3]) >= 0)
                                            return [4, con];
                                    }
                                    return 0;
                                }
                                return 0;
                            }
                            //判断模式1
                            else if (l == 6 || l == 3 || l == 8 || (con.substring(0, 1) == '#' && (l == 7 || l == 4 || l == 9))) {
                                //支持：ffffff  #ffffff  fff #fff   #ff123455 ff123456
                                if (l == 7 || l == 4 || l == 9)
                                    con = con.substring(1);

                                if (con.match(/^[0-9,a-f]+$/i)) {
                                    if (con.length == 6)
                                        return [1, con];
                                    else if (con.length == 3) {
                                        var red = con.substring(0, 1);
                                        var green = con.substring(1, 2);
                                        var blue = con.substring(2, 3);
                                        return [1, red + red + green + green + blue + blue];
                                    } else
                                        return [3, con];
                                }
                                return 0;
                            }
                            return 0;
                        }

                        function inputError(str) {
                            if (str == undefined)
                                notice("颜色错误!", "#btn");
                            else
                                notice(str, "#btn");
                            resetResult();
                        }


                        function rgb2hsl(r, g, b) {
                            r /= 255, g /= 255, b /= 255;
                            var max = Math.max(r, g, b),
                                min = Math.min(r, g, b);
                            var h, s, l = (max + min) / 2;

                            if (max == min) {
                                h = s = 0; // achromatic
                            } else {
                                var d = max - min;
                                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                                switch (max) {
                                    case r:
                                        h = (g - b) / d + (g < b ? 6 : 0);
                                        break;
                                    case g:
                                        h = (b - r) / d + 2;
                                        break;
                                    case b:
                                        h = (r - g) / d + 4;
                                        break;
                                }
                                h /= 6;
                            }
                            h = Math.round(360 * h) + "°";
                            s = (s * 100).toFixed(2) + "% ";
                            l = (l * 100).toFixed(2) + "% ";
                            return [h, s, l];
                        }

                        function hslToRgb(h, s, l) {
                            var r, g, b;

                            if (s == 0) {
                                r = g = b = l; // achromatic
                            } else {
                                function hue2rgb(p, q, t) {
                                    if (t < 0) t += 1;
                                    if (t > 1) t -= 1;
                                    if (t < 1 / 6) return p + (q - p) * 6 * t;
                                    if (t < 1 / 2) return q;
                                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                                    return p;
                                }

                                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                                var p = 2 * l - q;
                                r = hue2rgb(p, q, h + 1 / 3);
                                g = hue2rgb(p, q, h);
                                b = hue2rgb(p, q, h - 1 / 3);
                            }

                            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
                        }

                        function rgb2hsv(r1, r2, r3) {
                            var maxJ = Math.max(r1, r2, r3);
                            var minJ = Math.min(r1, r2, r3);
                            var _max = maxJ - minJ;
                            var H, S, V;
                            if (r1 == r2 && r2 == r3) {
                                H = 0;
                                S = 0;
                            } else {
                                switch (maxJ) {
                                    case r1:
                                        H = (r2 - r3) / _max;
                                        break;
                                    case r2:
                                        H = 2 + (r3 - r1) / _max;
                                        break;
                                    case r3:
                                        H = 4 + (r1 - r2) / _max;
                                        break;
                                }
                                H *= 60;
                                if (H < 0) H += 360;
                                H = (H).toFixed(2);
                                S = ((maxJ - minJ) / maxJ).toFixed(2);
                            }
                            V = (maxJ / 255).toFixed(2);
                            return [H, S, V];
                        }


                        function resetResult() {

                            $("#con").val('');
                            for (var i = 1; i < 6; i++) {
                                $("#re" + i).html('');
                                $("#re" + i + "_h").val('')
                                $("#colorbox" + i).css("background-color", "");
                            }

                        }

                        function testModel() {
                            debug(getModel('fff'));
                            debug(getModel('#EEE'));
                            debug(getModel(' #ffaacc'));
                            debug(getModel(' #ffaacc '));
                            debug(getModel('125,125,125'));
                            debug(getModel('125, 125, 125'));
                            debug(getModel('125, 125, 255 ,0.5'));
                            debug(getModel('125, 125, 255 ,0'));
                            debug(getModel(' #ffaaccdd '));
                            debug(getModel(' #12aaccdd '));

                            debug(getModel('fffa'));
                            debug(getModel('ffg'));
                            debug(getModel('#ffg'));
                            debug(getModel('#ffgg'));
                            debug(getModel('#ffgggg'));
                            debug(getModel('555,555,555'));
                            debug(getModel('125, 125, 2558'));
                            debug(getModel('125, 125, 2558 ,0.5'));
                            debug(getModel('125, 125, 255 ,1.5'));
                            debug(getModel('ee, 125, 255 ,1.5'));
                            debug(getModel('256, 125, 255 ,1.5'));
                            debug(getModel('256, 125, 255 ,0.5'));
                        }

                        //testModel();
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</body>

</html>